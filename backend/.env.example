# QA Box 后端配置文件示例
# 复制此文件为 .env 并修改配置

# ============================================
# 安全配置 (生产环境必须修改!)
# ============================================
# JWT 密钥 - 请使用随机字符串，例如: openssl rand -hex 32
SECRET_KEY=your-secret-key-please-change-in-production

# 管理员账号
ADMIN_USERNAME=admin
ADMIN_PASSWORD=change-this-password

# ============================================
# 管理后台配置
# ============================================
# 管理路由前缀 - 建议使用不易猜测的路径（前后端需保持一致）
# 修改后需同步更新前端 .env 中的 VITE_ADMIN_ROUTE_PREFIX
ADMIN_ROUTE_PREFIX=/console-x7k9m

# Admin Token 过期天数
ADMIN_TOKEN_EXPIRE_DAYS=7

# 剩余多少天时自动续期
ADMIN_TOKEN_REFRESH_DAYS=1

# ============================================
# 数据库配置
# ============================================
DATABASE_URL=sqlite+aiosqlite:///./qa_box.db

# ============================================
# 备份配置
# ============================================
# 备份目录
BACKUP_DIR=./backups

# 自动备份间隔(小时)，0 表示禁用自动备份
BACKUP_INTERVAL_HOURS=24

# 最多保留备份数量
BACKUP_MAX_COUNT=7

# ============================================
# 服务器配置
# ============================================
# 后端监听地址 (127.0.0.1 = 仅本机, 0.0.0.0 = 所有网卡)
# 如果使用 Nginx 反代，建议设为 127.0.0.1
HOST=127.0.0.1

# 后端端口 (建议使用非标准端口，如 18000, 28000 等)
PORT=18000

# 前端端口 (生产模式)
FRONTEND_PORT=13000

# Gunicorn/Uvicorn workers 数量
# 建议: CPU核心数 * 2 + 1，但对于小服务器 2-4 即可
WORKERS=2

# ============================================
# CORS 配置
# ============================================
# 允许的前端域名，多个用逗号分隔
# 生产环境请改为你的实际域名，如: https://qa.example.com
CORS_ORIGINS=http://localhost:13000,http://127.0.0.1:13000

# ============================================
# 文件上传配置
# ============================================
UPLOAD_DIR=./uploads

# ============================================
# 部署模式
# ============================================
# 是否使用 Nginx 反代 (true/false)
# true: 前端直接访问后端同域，不需要跨域
# false: 前端通过 vite preview 代理访问后端
USE_NGINX=false

# 如果使用 Nginx，填写对外服务的域名或IP:端口
# 例如: https://qa.example.com 或 http://123.45.67.89
PUBLIC_URL=
